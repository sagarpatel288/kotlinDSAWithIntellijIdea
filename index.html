<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kotlin DSA Practice Files</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="contentListUpdater.js"></script>
    <!--<script>
        document.addEventListener('DOMContentLoaded', async () => {
            const fileList = document.getElementById('file-list');
            const sortOptions = document.getElementById('sort-options');
            const loader = document.getElementById('loader');
            const messageBox = document.getElementById('message-box');
            const messageText = document.getElementById('message-text');
            const closeMessageButton = document.getElementById('close-message');

            let kotlinFiles = [];

            // Show loader initially
            loader.style.display = 'block';

            // Close message box
            closeMessageButton.addEventListener('click', () => {
                messageBox.style.display = 'none';
            });

            // Fetch Kotlin files from files.json
            async function fetchKotlinFiles() {
                try {
                    const response = await fetch('files.json');
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    kotlinFiles = await response.json();
                } catch (error) {
                    console.error('Error fetching file list:', error);
                    showMessage('Error fetching file list. Please try again later.', 'error');
                } finally {
                    // Hide loader after fetching is done
                    loader.style.display = 'none';
                }
            }

            // Render the list of Kotlin files
            function renderFileList(files) {
                fileList.innerHTML = '';
                files.forEach(file => {
                    const link = document.createElement('a');
                    link.href = file.url;
                    link.className = 'file-link';
                    link.textContent = file.name;
                    fileList.appendChild(link);
                });
            }

            // Show message box
            function showMessage(message, type) {
                messageText.textContent = message;
                messageBox.className = `message-box ${type}`;
                messageBox.style.display = 'block';
            }

            // Sort and render the file list based on selected option
            sortOptions.addEventListener('change', () => {
                const option = sortOptions.value;
                let sortedFiles = [...kotlinFiles];

                switch (option) {
                    case 'ascending':
                        sortedFiles.sort((a, b) => a.name.localeCompare(b.name));
                        break;
                    case 'descending':
                        sortedFiles.sort((a, b) => b.name.localeCompare(a.name));
                        break;
                    case 'latest':
                        sortedFiles.sort((a, b) => new Date(b.date) - new Date(a.date));
                        break;
                    case 'oldest':
                        sortedFiles.sort((a, b) => new Date(a.date) - new Date(b.date));
                        break;
                    default:
                        break;
                }

                renderFileList(sortedFiles);
            });

            // Start fetching Kotlin files from files.json
            await fetchKotlinFiles();
            renderFileList(kotlinFiles);
        });
    </script>-->
    <!--<script>
        async function loadFiles() {
            try {
                    const timestamp = new Date().getTime();
                    const response = await fetch(`files.json`);
                    if (!response.ok) {
                      throw new Error('Failed to fetch files');
                    }
                    const files = await response.json();
                    const fileList = document.getElementById('file-list');
                      fileList.innerHTML = ''; // Clear existing content
                      files.forEach(file => {
                        const link = document.createElement('a');
                        link.href = file.url;
                        link.textContent = file.name;
                        link.className = 'file-link';
                        fileList.appendChild(link);
                      });
          } catch (error) {
            console.error('Error loading files:', error);
            document.getElementById('file-list').textContent = 'Error loading files. Please try again later.';
          }
        }
        loadFiles();
    </script>-->
    <style>
        body {
            font-family: 'Roboto', Arial, sans-serif;
            background-color: #1e1e1e;
            color: #c9d1d9;
            text-align: center;
            padding: 20px;
        }
        .file-link {
            display: block;
            color: #58a6ff;
            text-decoration: none;
            margin: 5px 0;
        }
        .file-link:hover {
            text-decoration: underline;
        }
        #sort-options {
            margin-bottom: 20px;
            padding: 10px;
            font-size: 16px;
        }
    </style>
</head>
<body>
<h1>Kotlin DSA Practice Files</h1>
<div id="loader" class="loader">Loading...</div>

<div id="message-box" class="message-box" style="display: none;">
    <span id="message-text"></span>
    <button id="close-message">Close</button>
</div>

<!-- Sorting Options -->
<label for="sort-options"></label><select id="sort-options">
    <option value="default">Default</option>
    <option value="ascending">Ascending</option>
    <option value="descending">Descending</option>
    <option value="latest">Latest to Old</option>
    <option value="oldest">Old to Latest</option>
</select>

<!-- File List -->
<div id="file-list">
    <!-- The file list will be populated here dynamically -->
</div>
</body>
</html>